<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>التوأم الرقمي — مدينة عَنّة</title>

  <!-- CesiumJS (نسخة 1.113 المطلوبة لـ Google 3D) -->
  <link href="https://cesium.com/downloads/cesiumjs/releases/1.113/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
  <script src="https://cesium.com/downloads/cesiumjs/releases/1.113/Build/Cesium/Cesium.js"></script>

  <style>
    html, body, #cesiumContainer {
      width: 100%; height: 100%; margin: 0; padding: 0;
      font-family: "Segoe UI";
      overflow: hidden;
    }
    .toolbar {
      position:absolute; top:15px; right:15px; z-index:10;
      display:flex; gap:10px;
    }
    .btn {
      background:white; border:1px solid #ddd;
      padding:8px 14px; border-radius:8px; cursor:pointer;
    }
  </style>
</head>

<body>

<div id="cesiumContainer"></div>

<div class="toolbar">
  <button id="btnReset" class="btn">إعادة التموضع</button>
  <button id="btnToggle" class="btn">إظهار/إخفاء المباني</button>
</div>

<script>
// 1) مفتاح Google
Cesium.GoogleMaps.defaultApiKey = "YOUR_GOOGLE_API_KEY";

// 2) بدء المشهد
const viewer = new Cesium.Viewer("cesiumContainer", {
  terrainProvider: Cesium.CesiumTerrainProvider.fromIonAssetId(1),
  baseLayerPicker: false,
  timeline: false,
  animation: false
});

// 3) إضافة Google Photorealistic 3D Tiles
const google3d = viewer.scene.primitives.add(
  new Cesium.GoogleMaps3DTileset()
);

// 4) إضافة طبقة SLPK الخاصة بك
const slpk = viewer.scene.primitives.add(
  new Cesium.Cesium3DTileset({
    url: "/assets/city3d/anahcityscenes01/tileset.json"
  })
);

// 5) كاميرا البداية
viewer.camera.flyTo({
  destination: Cesium.Cartesian3.fromDegrees(41.9866, 34.3758, 900),
  orientation: { pitch: Cesium.Math.toRadians(-45) }
});

// 6) زر إعادة التموضع
document.getElementById("btnReset").onclick = () => {
  viewer.camera.flyTo({
    destination: Cesium.Cartesian3.fromDegrees(41.9866, 34.3758, 900),
    orientation: { pitch: Cesium.Math.toRadians(-45) }
  });
};

// 7) زر إخفاء الــ SLPK
document.getElementById("btnToggle").onclick = () => {
  slpk.show = !slpk.show;
};
</script>

</body>
</html>
