<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>التوأم الرقمي — مدينة عَنّة</title>

  <!-- CesiumJS -->
  <link href="https://cesium.com/downloads/cesiumjs/releases/1.113/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
  <script src="https://cesium.com/downloads/cesiumjs/releases/1.113/Build/Cesium/Cesium.js"></script>

  <style>
    html, body, #cesiumContainer {
      width: 100%; height: 100%; margin:0; padding:0;
      font-family: "Segoe UI", Arial;
    }
    .toolbar {
      position:absolute;
      top:15px; right:15px; z-index:10;
      display:flex; gap:10px;
    }
    .btn {
      background:white;
      padding:8px 14px;
      border-radius:8px;
      border:1px solid #ddd;
      cursor:pointer;
    }
  </style>
</head>

<body>

<div id="cesiumContainer"></div>

<div class="toolbar">
  <button id="btnReset" class="btn">إعادة التموضع</button>
  <button id="btnToggle" class="btn">إخفاء / إظهار المباني</button>
</div>

<script>

// 0) إعداد مفتاح Google
Cesium.GoogleMaps.defaultApiKey = "YOUR_GOOGLE_API_KEY";

// 1) بدء المشهد
const viewer = new Cesium.Viewer("cesiumContainer", {
  terrain: Cesium.CesiumTerrainProvider.fromIonAssetId(1), // Terrain من Cesium (أفضل من Esri)
  baseLayerPicker: false,
  timeline: false,
  animation: false,
});

// 2) إضافة Google 3D Photorealistic
const googleLayer = viewer.scene.primitives.add(
  new Cesium.GoogleMaps3DTileset()
);

// 3) طبقة SLPK الخاصة بك (يجب رفعها على Cesium Ion)
const slpkLayer = viewer.scene.primitives.add(
  new Cesium.Cesium3DTileset({
    url: "/assets/city3d/anahcityscenes01/tileset.json"
  })
);

// 4) كاميرا البداية على مدينة عَنّة
viewer.camera.flyTo({
  destination: Cesium.Cartesian3.fromDegrees(41.9866, 34.3758, 900),
  orientation: { pitch: Cesium.Math.toRadians(-45) }
});

// 5) زر إعادة التموضع
document.getElementById("btnReset").onclick = () => {
  viewer.camera.flyTo({
    destination: Cesium.Cartesian3.fromDegrees(41.9866, 34.3758, 900),
    orientation: { pitch: Cesium.Math.toRadians(-45) }
  });
};

// 6) زر إخفاء / إظهار المباني
document.getElementById("btnToggle").onclick = () => {
  slpkLayer.show = !slpkLayer.show;
};

</script>

</body>
</html>
